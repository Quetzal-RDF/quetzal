SELECT ?date ?diag_code (COUNT(DISTINCT ?empi) AS ?opcnt) WHERE {
	SERVICE <http://9.12.235.45:9091/openrdf-sesame/repositories/bjdiag2> {
        ?x <http://www.ibm.com/health/bjdiag/DIAG_OUTPATIENT#EMPI> ?empi .
		?x  <http://www.ibm.com/health/bjdiag/DIAG_OUTPATIENT#DATE> ?date ;
			<http://www.ibm.com/health/bjdiag/DIAG_OUTPATIENT#DIAG_CODE> ?diag_code
		FILTER (?diag_code = "胸闷" 
			 || ?diag_code = "胸痛"
			 || ?diag_code = "肺部感染" )  
    } 
} GROUP BY ?date ?diag_code
